function loadingScreen(){var a=100*$audioEngine.loadBGM/$audioEngine.BGM.files.length,b=100*$audioEngine.loadSFX/$audioEngine.SFX.files.length;!isNaN(a)&&isFinite(a)||(a=0),!isNaN(b)&&isFinite(b)||(b=0);var c=$audioEngine.loadBGMTotal+$audioEngine.loadSFXTotal,d=$audioEngine.loadBGMTotal/c,e=$audioEngine.loadSFXTotal/c,f=parseFloat((d*a).toFixed(2))+parseFloat((e*b).toFixed(2)),g=Math.floor($("#loading .letter").length*f/100);$("#loading .letter").each(function(a){if(a<=g&&!$(this).hasClass("passed")){cancelAnimationFrame($hackIntervals[a]);var b=$(this).data("letter");$(this).html(b),$(this).addClass("passed")}}),100==f&&($(document).off("loadingBGM loadingSFX",loadingScreen),$("body").addClass("loaded"),mobileCheck()&&$("#loading").addClass("tap"),checkFocus(function(){mobileCheck()?$(window).on(eventtype,start):setTimeout(start,1e3)}))}function start(){mobileCheck()&&($(window).off(eventtype,start),$("#loading").removeClass("tap")),TweenMax.staggerTo(shuffleArray($("#loading .letter")),1,{opacity:0},.1,function(){TweenMax.set("#loading",{display:"none"}),$audioEngine.BGM.play(),TweenMax.staggerFromTo(["#menu","#soundSwitch","#languageSwitch","#progressBar"],1,{opacity:0,visibility:"visible"},{opacity:.5,clearProps:"opacity",delay:2},.5),init()})}function init(){$currentScreen=0,$progress=0,$("#bt_retry").on(eventtype,function(){$scrollingAllowed&&($(this).off(eventtype),reset())}),TweenMax.killAll(!1,!1,!0,!1),TweenMax.set("#scroll",{opacity:0}),switchScreens(!0)}function reset(){new TimelineMax,$timelines.screen10.out().call(function(){$("#presentation").find("#content").empty(),$("#content").html($domClone),init()},[],null,"+=1")}function switchScreens(a){var b=$currentScreen;if(a)$currentScreen++,b>0&&(clearProps($timelines["screen"+b].out()),c=$timelines["screen"+b].idle()),clearProps($timelines["screen"+$currentScreen].in()),d=new TimelineMax({onStart:disableScroll,onComplete:enableScroll}),b>0&&(d.add($timelines["screen"+b].out()),d.call(function(){hideScreen(b),c.kill(),clearProps(c)})),d.call(function(){showScreen($currentScreen)},[],null,"-=2"),d.add($timelines["screen"+$currentScreen].in(),"-=1"),4==$currentScreen?d.call($timelines["screen"+$currentScreen].idle,[],null,0):8==$currentScreen?d.call($timelines["screen"+$currentScreen].idle,[],null,"-=1"):10==$currentScreen?d.call($timelines["screen"+$currentScreen].idle,[],null,"-=2"):d.call($timelines["screen"+$currentScreen].idle);else{$currentScreen--;var c=$timelines["screen"+b].idle();b>0&&clearProps($timelines["screen"+b].in()),clearProps($timelines["screen"+$currentScreen].out());var d;(d=new TimelineMax({onStart:disableScroll,onComplete:enableScroll})).add($timelines["screen"+b].in().reverse()),d.call(function(){hideScreen(b),c.kill(),clearProps(c)}),b>0&&(d.call(function(){showScreen($currentScreen)},[],null,"-=1"),d.add($timelines["screen"+$currentScreen].out().reverse())),4==b?d.call($timelines["screen"+b].idle,[],null,0):8==b?d.call($timelines["screen"+b].idle,[],null,"-=1"):10==b?d.call($timelines["screen"+b].idle,[],null,"-=2"):d.call($timelines["screen"+b].idle)}var e=$currentScreen/$maxScreens,f=["I","II","III","IV","V","VI","VII","VIII","IX","X"];$("#progressBar").css("height","calc((100vh - 5vw - 165px - 2em) * "+e+")"),$("#progressBar").attr("data-progress","- "+f[$currentScreen-1]+" / X -"),$scrollProgress=0}function enableScroll(){$scrollingAllowed=!0,$currentScreen<$maxScreens&&TweenMax.to("#scroll",1,{opacity:1})}function disableScroll(){$scrollingAllowed=!1,TweenMax.to("#scroll",1,{opacity:0})}function toggleScroll(){$scrollingAllowed?disableScroll():enableScroll()}function showScreen(a){$("#screen"+a).addClass("active")}function hideScreen(a){$("#screen"+a).removeClass("active")}function toggleScreen(a){$("#screen"+a).toggleClass("active")}function soundSwitch(a){1==a?($audioEngine.unMute(),$("#soundSwitch").removeClass("off").addClass("on")):0==a?($audioEngine.mute(),$("#soundSwitch").removeClass("on").addClass("off")):($audioEngine.toggleMute(),$("#soundSwitch").toggleClass("on off"))}function blurIn(a){var b=shuffleArray($(a+" .letter")),c=$("body").hasClass("white")?"34, 34, 34":"255, 255, 255",d="0 24px 8px rgba("+c+", 0), 0 -24px 8px rgba("+c+", 0)",e="#screen9"==a?"reveal2":"#screen5"==a?"swooshIn":"reveal1",f=new TimelineMax;return f.call(function(){$audioEngine.SFX.play(e)},[],null,.25),f.staggerFrom(b,1,{color:"transparent",scale:1.5},.1),f.staggerFrom(b,1,{textShadow:d},.1,.5),f}function smokeIn(a){var b=$("body").hasClass("white")?"34, 34, 34":"255, 255, 255",c=new TimelineMax;return c.call(function(){$audioEngine.SFX.play("swooshIn")},[],null,.25),c.set(a+" .letter",{color:"transparent"}),c.staggerFrom(a+" .letter",2,{transform:"translate3d(15rem,-8rem,0) rotate(-40deg) skewX(70deg) scale(1.5)",opacity:0,ease:Power0.none},-.075),c.staggerFromTo(a+" .letter",1,{textShadow:"0 0 40px rgb("+b+")"},{textShadow:"0 0 0px rgb("+b+")",ease:Power0.none},-.075,0),"#screen2"==a&&(c.call(positionTitle,[],null,"-=1"),c.call(function(){$audioEngine.SFX.play("slideIn")}),c.from(a+" h2",1,{x:-40,opacity:0})),c}function smokeOut(a){var b=$("body").hasClass("white")?"34, 34, 34":"255, 255, 255",c=new TimelineMax;return"#screen10"==a?c.call(function(){$audioEngine.SFX.play("reset")}):c.call(function(){$audioEngine.SFX.play("swooshOut")},[],null,.25),c.set(a+" .letter",{color:"transparent"}),c.staggerFromTo(a+" .letter",1,{textShadow:"0 0 0px rgb("+b+")"},{textShadow:"0 0 40px rgb("+b+")",ease:Power0.none},.075),c.staggerTo(a+" .letter",2,{transform:"translate3d(15rem,-8rem,0) rotate(-40deg) skewX(70deg) scale(1.5)",opacity:0,ease:Power0.none},.075,0),c}function screen2_out(){var a=new TimelineMax;return a.call(positionTitle),a.to("#screen2 h2",1,{x:40,opacity:0}),a.set("#screen2 h1",{fontSize:"7vw"},.5),a.call(function(){$audioEngine.SFX.play("swooshOut")}),a.to("#screen2 h1",2,{fontSize:"200vw",opacity:0,ease:Expo.easeInOut}),a.set("#screen2 h1",{fontSize:"200vw"}),a}function screen2_idle(){var a=new TimelineMax;return a.to("#screen2 .glitch-text",3,{y:-15,repeat:-1,yoyo:!0,ease:Sine.easeInOut}),a}function screen3_in(){var a=new TimelineMax;return a.add("start"),a.call(function(){$audioEngine.SFX.play("swooshIn")},[],null,"start+=1"),a.set("#screen3 h1.first",{fontSize:"200vw"},"start"),a.fromTo("#screen3 h1.first",3,{fontSize:"200vw",opacity:0},{fontSize:"7vw",opacity:1,ease:Expo.easeInOut},"start+=.25"),a.set("#screen3 h1.first",{fontSize:"7vw"}),a.from("#screen3 h1.first .word:nth-of-type(2)",1,{transform:"rotate(90deg)",opacity:0,ease:Bounce.easeOut},"-=.5"),a.from("#screen3 h1.first .word:nth-of-type(3)",1,{y:20,opacity:0,ease:Bounce.easeOut},"-=.5"),a.from("#screen3 h1.first .word:nth-of-type(4)",1,{x:20,opacity:0,ease:Bounce.easeOut},"-=.5"),a.add("glitch1","-=.75"),a.call(function(){$audioEngine.SFX.play("interference1")},[],null,"glitch1+=2.5"),a.set("#screen3 h1.first .word",{opacity:1,textShadow:"0 0 0 rgba(255, 0, 0, 0), 0 0 0 rgba(0, 255, 255, 0)"},"glitch1"),a.to("#screen3 h1.first .word",2,{opacity:0,color:"transparent",textShadow:"12px 0 0 rgba(255, 0, 0, .5), -12px 0 0 rgba(0, 255, 255, .5)",ease:RoughEase.ease.config({template:Bounce.easeOut,strength:1,points:20,taper:"none",randomize:!0,clamp:!0})}),a.add("glitch2"),a.from("#screen3 h1.second",2,{opacity:0,color:"transparent",textShadow:"12px 0 0 rgba(255, 0, 0, .5), -12px 0 0 rgba(0, 255, 255, .5)",ease:RoughEase.ease.config({template:Bounce.easeOut,strength:1,points:20,taper:"none",randomize:!0,clamp:!0})}),a.call(function(){$audioEngine.SFX.play("interference2")},[],null,"glitch2"),a}function screen3_out(){TweenMax.killTweensOf("#screen3 h1.second");var a=new TimelineMax;return a.call(function(){$audioEngine.SFX.play("noise")}),a.set("#screen3 h1.second",{webkitAnimation:"none",animation:"none"}),a.set("#screen3 h1.second",{transform:"scale(4)"}),a.set("#screen3 h1.second",{transform:"scale(2) translateX(-15vw)"},"+=.2"),a.set("#screen3 h1.second",{transform:"scale(8) translateX(20vw)"},"+=.2"),a.set("#screen3 h1.second",{},"+=.2"),a}function screen3_idle(){var a=TweenMax.to("#screen3 h1.second",2,{opacity:0,color:"transparent",textShadow:"12px 0 0 rgba(255, 0, 0, 0), -12px 0 0 rgba(0, 255, 255, 0)",ease:RoughEase.ease.config({template:Bounce.easeOut,strength:1,points:20,taper:"none",randomize:!0,clamp:!0})}),b=new TimelineMax({repeat:-1,repeatDelay:2,delay:2});return b.call(function(){$("#screen3").hasClass("active")&&$audioEngine.SFX.play("interference"+Math.ceil(2*Math.random()))}),b.add(a.reverse()),b.add(a),b}function screen4_in(){var a="0 24px 8px rgba(255, 255, 255, 0), 0 -24px 8px rgba(255, 255, 255, .0)",b=new TimelineMax({delay:1.25});return b.call(function(){TweenMax.to("#screen4 .glitch-text",3,{y:-25,repeat:-1,yoyo:!0,ease:Sine.easeInOut},.5)}),b.call(function(){$audioEngine.SFX.play("slideOut")},[],null,.25),b.staggerFrom("#cube .face",1,{opacity:0},.25),b.call(function(){$audioEngine.SFX.play("slideIn")},[],null,"-=.5"),b.from("#screen4 h2.first",.5,{opacity:0,color:"transparent"}),b.add("solid","+=2"),b.call(function(){$("#cube").addClass("solid")},[],null,"solid"),b.to("#screen4 h2.first",1,{opacity:0,color:"transparent"},"solid"),b.call(function(){$audioEngine.SFX.play("swooshIn")}),b.call(function(){$audioEngine.SFX.play("slideOut")}),b.staggerFrom($("h2.second .letter"),.5,{fontWeight:100,opacity:0,textShadow:a},.075),b}function screen4_out(){var a=new TimelineMax;return a.call(function(){$("#cube").removeClass("solid")}),a.call(function(){$audioEngine.SFX.play("swooshOut")}),a.to("#screen4 h2.second",1,{opacity:0,left:"2.5vw"}),a.staggerTo("#cube .face",1,{opacity:0},.25,"-=.5"),a.to("#scene",1,{opacity:0},"-=1"),a.set("#scene",{},"+=1"),a}function screen4_idle(){var a=new TimelineMax({repeat:-1});a.to("#cube",2,{rotationX:"+=90_cw"},0),a.to("#cube",2,{rotationY:"+=90_cw"},2),a.to("#cube",2,{rotationX:"+=90_cw"},4),a.to("#cube",2,{rotationY:"+=90_cw"},6),a.to("#cube",2,{rotationX:"+=90_cw"},8),a.to("#cube",2,{rotationY:"+=90_cw"},10),a.to("#cube",2,{rotationX:"+=90_cw"},12),a.to("#cube",2,{rotationY:"+=90_cw"},14);var b=new TimelineMax;return b.set("#cube",{rotationX:"30_ccw",rotationY:"30_cw"}),b.add(a),b.to("#scene",3,{y:-25,repeat:-1,yoyo:!0,ease:Sine.easeInOut},0),b}function screen6_in(){var a=new TimelineMax;return a.call(function(){$audioEngine.SFX.play("swell")}),a.call(function(){$audioEngine.SFX.play("slideIn")}),a.set("#charas",{scale:.5,xPercent:50,x:-240}),a.from("#screen6 h1",2,{opacity:0,top:"-3em",ease:Elastic.easeOut}),a.fromTo(".me",2,{opacity:0,y:-80},{opacity:1,y:0,ease:Elastic.easeOut},"-=1"),a}function screen6_out(){var a=new TimelineMax;return a.call(function(){$audioEngine.SFX.play("slideOut")}),a.to("#screen6 h1",1,{opacity:0,right:"-3em"}),a}function screen7_in(){var a=new TimelineMax;return a.set("#charas",{scale:.5,xPercent:50,x:-240}),a.call(function(){$audioEngine.SFX.play("slideIn")},[],null,.5),a.from("#screen7 h1",2,{opacity:0,top:"-3em",ease:Elastic.easeOut}),a.fromTo("#charas",1,{scale:.5,xPercent:50,x:-240},{scale:1,xPercent:50,x:-96,ease:Elastic.easeOut},.5),a}function screen7_out(){var a=new TimelineMax;return a.call(function(){$audioEngine.SFX.play("slideOut")}),a.to("#screen7 h1",1,{opacity:0,right:"-3em"}),a}function screen8_in(){var a=new TimelineMax;return a.call(function(){$audioEngine.SFX.play("slideIn")},[],null,.5),a.from("#screen8 h1",2,{opacity:0,top:"-0.5em",ease:Elastic.easeOut}),a.call(function(){$(".speech").html("level up!")}),a.fromTo(".speech",2,{opacity:0,y:"-10em"},{opacity:1,y:0,ease:Elastic.easeOut},"-=1"),a}function screen8_out(){var a=$timelines.screen8.idle().getChildren()[0],b=new TimelineMax;return b.call(function(){$audioEngine.SFX.play("slideOut")}),b.to("#screen8 h1",1,{opacity:0,right:"-3em"}),b.call(function(){a.kill();var b=new TimelineMax;b.set(a.target,{opacity:1}),b.to(a.target,.75,{y:0})},[],null,"-=1"),b.to(".speech",1,{opacity:0,y:"-10em"},"+=.75"),b}function screen8_idle(){var a=new TimelineMax;return a.to([".me",".speech"],.75,{y:-50,repeat:-1,yoyo:!0,ease:Bounce.easeIn}),a}function screen9_in(){var a=new TimelineMax;return a.fromTo("#charas",1,{xPercent:50,x:-96},{xPercent:0,x:0,ease:Circ.easeInOut}),a.staggerTo([".npc1",".npc2",".npc3"],.5,{opacity:1},.25),a.fromTo("#screen9 .question",2,{opacity:0},{opacity:1,ease:Elastic.easeOut},"-=1"),a}function screen9_out(){var a=$timelines.screen9.idle().getChildren()[0],b=new TimelineMax;return b.call(function(){a.kill(),TweenMax.to(a.target,.75,{opacity:1})}),b.fromTo("#screen9 .question",1,{opacity:1},{opacity:0},"+=.75"),b}function screen9_idle(){var a=new TimelineMax;return a.to("#screen9 .question",.75,{opacity:.5,repeat:-1,yoyo:!0,ease:Bounce.easeIn}),a}function screen10_in(){var a=new TimelineMax;return a.set(".chara",{opacity:1}),a.call(function(){$(".speech").html("Hi!")}),a.call(function(){$audioEngine.SFX.play("speech")},[],null,2),a.fromTo(".speech",2,{opacity:0,y:"-10em"},{opacity:1,y:0,ease:Elastic.easeOut},2),a.staggerTo([".npc1",".npc2",".npc3"],.5,{scaleX:-1,x:192,ease:Bounce.easeOut},.25,"-=1"),a.fromTo("#screen10 .question",2,{opacity:0},{opacity:1,ease:Elastic.easeOut}),a.call(function(){$("#menu").trigger(eventtype)}),a}function screen10_out(){var a=$timelines.screen10.idle().getChildren()[1],b=new TimelineMax;return b.call(function(){a.kill(),TweenMax.to(a.target,.75,{opacity:1})}),b.fromTo("#screen10 .question",1,{opacity:1},{opacity:0},"+=.75"),b.set("#screen10",{opacity:0},"+=1"),b.to("#charas",2,{opacity:0},"-=1"),b}function screen10_idle(){var a=new TimelineMax;return a.staggerTo([[".me",".speech"],".npc1",".npc2",".npc3"],.75,{y:-50,repeat:-1,yoyo:!0,ease:Bounce.easeIn},.25),a.to("#screen10 .question",.75,{opacity:.5,repeat:-1,yoyo:!0,ease:Bounce.easeIn},4),a}function positionTitle(){var a=Math.round($("#screen2 .letter").last().offset().left+$("#screen2 .letter").last().width());$("#screen2 h2").css("right",$(window).width()-a)}function colorSwitch(a){var b=a?[255,0]:[0,255],c=a?[255,34]:[34,255];a?($("body").addClass("white"),$audioEngine.BGM.setCrossfade("glitch",0,5),$audioEngine.BGM.setCrossfade("data",1,5)):($("body").removeClass("white"),$audioEngine.BGM.setCrossfade("glitch",1,5),$audioEngine.BGM.setCrossfade("data",0,5)),TweenMax.to(".letter",1,{color:"rgb("+c[1]+", "+c[1]+", "+c[1]+")"}),$("html").hasClass("isFirefox")||TweenMax.to($({someValue:b[0]}),2,{someValue:b[1],ease:Power3.easeInOut,onUpdate:function(a){var b=Math.floor(a.target[0].someValue);firefliesColors[0]=b+", "+b+", "+b},onUpdateParams:["{self}"]})}function letterize(a){var b=a.text(),c="",d=[],e=!1;$.each(b.split(""),function(b,f){if("<"==f&&(e=!0),e)return d.push(f),void(">"==f&&(c+=d.join(""),e=!1,d=[]));var g="letter";" "==f&&(g+=" space"),c+=a.hasClass("letterData")?'<span class="'+g+'" data-letter="'+f+'">'+f+"</span>":'<span class="'+g+'">'+f+"</span>"}),a.html(c)}function hackString(a,b){$hackIntervals[b]=requestAnimationFrame(function(){hackString(a,b)});var c=Math.floor(36*Math.random()).toString(36);a.html(c)}function checkFocus(a){var b=function(){$(window).off("focus",b),a()};document.hasFocus()?a():$(window).on("focus",b)}function shuffleArray(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),b=a[--d],a[d]=a[c],a[c]=b;return a}function clearProps(a){var b=a.getChildren();a.kill();for(var c=0;c<b.length;c++)null!=b[c].target&&TweenMax.set(b[c].target,{clearProps:"all"})}function mobileCheck(){var a=!1;return function(b){(/(android|ipad|playbook|silk|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a}function phoneCheck(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a}function tabletCheck(){var a=!1;return!phoneCheck()&&mobileCheck()&&(a=!0),a}window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)};var $domClone,$audioEngine,support={animations:Modernizr.cssanimations},animEndEventNames={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},animEndEventName=animEndEventNames[Modernizr.prefixed("animation")],onEndAnimation=function(a,b){var c=function(a){if(support.animations){if(a.target!=this)return;this.removeEventListener(animEndEventName,c)}b&&"function"==typeof b&&b.call()};support.animations?a.addEventListener(animEndEventName,c):c()},eventtype=mobileCheck()?"touchend":"click",$hackIntervals=[],$currentScreen=0,$maxScreens=$(".screen").length,$scrollProgress=0,$scrollingAllowed=!1,$name="",$timelines={screen1:{"in":function(){return blurIn("#screen1")},out:function(){return smokeOut("#screen1")},idle:function(){return new TimelineMax}},screen2:{"in":function(){return smokeIn("#screen2")},out:function(){return screen2_out()},idle:function(){return screen2_idle()}},screen3:{"in":function(){return screen3_in()},out:function(){return screen3_out()},idle:function(){return screen3_idle()}},screen4:{"in":function(){return screen4_in()},out:function(){return screen4_out()},idle:function(){return screen4_idle()}},screen5:{"in":function(){return blurIn("#screen5")},out:function(){var a=smokeOut("#screen5");return a.call(function(){colorSwitch(!0)},[],null,2),a},idle:function(){return new TimelineMax}},screen6:{"in":function(){return screen6_in()},out:function(){return screen6_out()},idle:function(){return new TimelineMax}},screen7:{"in":function(){return screen7_in()},out:function(){return screen7_out()},idle:function(){return new TimelineMax}},screen8:{"in":function(){return screen8_in()},out:function(){return screen8_out()},idle:function(){return screen8_idle()}},screen9:{"in":function(){var a=blurIn("#screen9");return a.add(screen9_in(),0),a},out:function(){var a=smokeOut("#screen9");return a.add(screen9_out(),0),a},idle:function(){return screen9_idle()}},screen10:{"in":function(){var a=smokeIn("#screen10");return a.add(screen10_in(),0),a},out:function(){var a=smokeOut("#screen10");return a.add(screen10_out(),0),a.call(function(){colorSwitch(!1)}),a},idle:function(){return screen10_idle()}}};$(document).ready(function(){function a(){$scrollingAllowed&&$currentScreen<$maxScreens&&(j>h||k<i)&&switchScreens(!0)}if(mobileCheck()&&$("html").addClass("isMobile"),phoneCheck()&&$("html").addClass("isPhone"),tabletCheck()&&$("html").addClass("isTablet"),"Microsoft Internet Explorer"==navigator.appName&&null!=navigator.userAgent.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/)){var b=parseFloat(RegExp.$1);$("html").addClass("ie"+b)}navigator.userAgent.match(/Firefox/)&&$("html").addClass("isFirefox"),phoneCheck()||$("html").hasClass("isFirefox")||initParticles(),TweenMax.to("#loading",1,{opacity:1});var c=-1==document.location.hash.indexOf("?")?document.location.hash:document.location.hash.slice(0,document.location.hash.indexOf("?")),d=c.replace("#!/With/","");d=unescape(d);var e=$("#screen1 h1").html(),f=$("#about p").eq(0).html();if(0==c.indexOf("#!/With/")&&d.length>0&&"You"!=d);$("#screen1 h1").html(e),$("#about p").eq(0).html(f),$(".letterize").each(function(){letterize($(this))}),$("#menu").on(eventtype,function(){$("#about").toggleClass("open"),$audioEngine.SFX.play($("#about").hasClass("open")?"open":"close")}),$("#soundSwitch").on(eventtype,function(){soundSwitch("toggle"),$audioEngine.BGM.userMuted=!$audioEngine.BGM.userMuted}),$("#languageSwitch a").each(function(){var a=$(this).attr("href");a+=document.location.hash,$(this).attr("href",a)});var h=0,i=0,j=0,k=0,l=document.getElementById("presentation");l.addEventListener("touchstart",function(a){h=a.touches[0].pageX,i=a.touches[0].pageY},!1),l.addEventListener("touchend",function(b){j=b.changedTouches[0].pageX,k=b.changedTouches[0].pageY,a()},!1),$domClone=$("#content").html(),$(document).on("loadingBGM loadingSFX",loadingScreen),($audioEngine=AudioEngine.getInstance()).BGM.setFile("bgs"),$("#loading .letter").each(function(a){hackString($(this),a)})}),$(window).on("mousewheel",$.throttle(250,function(a){var b=a.originalEvent.deltaY,c=a.originalEvent.deltaX,d=Math.abs(b)>Math.abs(c)?b:c;0==d||$scrollProgress>=1||!$scrollingAllowed||(($scrollProgress+=$("html").hasClass("isFirefox")?d/2:d/20)<0&&($scrollProgress=0),$scrollProgress>1&&($scrollProgress=1),0==$scrollProgress&&$currentScreen>1||1==$scrollProgress&&$currentScreen<$maxScreens&&switchScreens(!0))})).on("resize",positionTitle).on("blur",function(){$audioEngine.ready&&!$audioEngine.BGM.userMuted&&soundSwitch(!1)}).on("focus",function(){$audioEngine.ready&&!$audioEngine.BGM.userMuted&&soundSwitch(!0)});